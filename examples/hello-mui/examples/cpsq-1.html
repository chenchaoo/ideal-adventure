<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
        
		<!--App自定义的css-->
		
		<link href="../css/mui.picker.css" rel="stylesheet" />
		<link href="../css/mui.poppicker.css" rel="stylesheet" />
		<!--标准mui.css-->
		<link rel="stylesheet" href="../css/mui.min.css">
		<!--App自定义的css-->
		<!-- <link rel="stylesheet" type="text/css" href="../css/app.css" /> -->
		<link rel="stylesheet" type="text/css" href="../css/mui.picker.min.css" />
		<style>
			h5 {
				margin: 5px 7px;
			}
			.mui-table-view-cell{
				padding: 18px 10px;
				font-family:'Helvetica Neue', Helvetica, sans-serif;
				
			}
			.mui-table-view-cell  span{
				color: #999;
			}
			.mui-table-view-cell.mui-collapse>.mui-navigate-right:after, .mui-table-view-cell.mui-collapse>.mui-push-right:after{
				content:'';
			}
			.mui-table-view-cell.mui-collapse.mui-active>.mui-navigate-right:after, .mui-table-view-cell.mui-collapse.mui-active>.mui-push-right:after{
				content: '';
			}
			.mui-input-row label{
				width: auto;
				padding:0px;
				font-size: 12px;
			}
			.mui-input-group .mui-input-row::after{
				background: none;
			}
			.mui-input-row label~input, .mui-input-row label~select, .mui-input-row label~textarea{
				width: 85px;
				float: right;
				font-size:14px;
				margin: 0;
				padding: 0;
				height: 25px;
				line-height: 25px;
				color: #cccccc;
			}
			.mui-input-row span{
				position:relative;
				top: 9px;
				right: 17px;
				font-size: 12px;
			}
			.mui-input{
				position: relative;
				clear:left;
				overflow:hidden;
			}
			.mui-input label{
				line-height:1.1;
				float:left;
				padding:18px 10px;
				width: 70%;
				font-size: 12px;
			}
			.mui-input label~input{
				width: 24%;
				float: left;
				margin-bottom:0;
				padding-left: 0;
				border:0;
				background:0 0;
				border-radius:0;
				box-shadow:none;
				font-size: 12px;
			}
			.mui-table-view-cell>a:not(.mui-btn){
				
				font-size: 12px;
			}
			.mui-input-group .mui-input-row{
				height: auto;
			}
			.mui-table-view-cell span img{
				position: relative;
				bottom: 20px;
				left: 57px;
			}
			.mui-input-row span img{
				position: relative;
				top: 4px;
				right: 4px;
			}
			.mui-table-view-cell label{
				color: #333;
				font-size: 14px;
				float: left;
				line-height: 25px;
			}
			.mui-table-view-cell span{
				color: #666;
				font-size: 14px;
				position: absolute;
				right: 20px;
			}
			.mui-table-view-cell .mui-input-row span{
				color: #333;
				position: absolute;
				line-height: 25px;
				top: 0;
			}
			.mui-table-view-cell{
				padding: 15px 0;
				margin: 0px 20px;
				border-bottom: 1px solid #eee;
			}
			.mui-table-view-cell::after{
				position: relative;
				height: 0;
			}
			.mui-table-view-cell .mui-jiantou{
				position: absolute;
				top: 4px;
				right: 0;
			}
			.mui-input-group::after{
				background: none;
			}
			.mui-input-group::before{
				height: 0;
				background: none;
			}
		</style>
	</head>

	<body>
		<div class="mui-daohang"></div>
		<header class="mui-bar mui-bar-naver mui-san">
			<a class="mui-icon" href="javascript:history.go(-1)" target="_self">
				<img src="../images/fanhui2.png">
			</a>
			<h1 class="mui-title" style="text-align: center;margin: 0;">申请人资质</h1>
		</header>
		<div class="mui-content">
			<div class="mui-content-padded" style="margin: 0px;">
				
				<form class="mui-input-group">
					<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
						<a class="mui-navigate-right" id='showUserPicker' type='button'>
							<label>名下房产类型</label>
							<span>
								<div id='real_estate_type' class="ui-alert">请选择</div>
							</span>
						</a>
				</li>
				<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
						<a class="mui-navigate-right" id='showCityPicker' type='button'>
							<label>房产年限</label>
							<span>
								<div id='real_estate_years' class="ui-alert">请选择</div>
							</span>
						</a>
				</li>
				<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
					<div class="mui-input-row">
						<label>房产估值</label>
						<input id="fcgz" name="fcgz" id="fcgz" type="text" placeholder="请输入">
						<span>万</span>
					</div>
					</li>
					<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
						<a class="mui-navigate-right" id='showChePicker' type='button'>
							<label>名下是否有车</label>
							<span><div id='userResult' class="ui-alert">请选择</div></span>
						</a>
				</li>
				<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
					<div class="mui-input-row">
						<label>汽车估值</label>
						<input id="qcgz" name="qcgz" type="text" placeholder=""><span></span>
					</div>
				</li>
				<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
					<a class="mui-navigate-right" id='showDaikPicker' type='button'> 
					 <div class="mui-input-row">
						<label>当前是否有为结清的贷款</label>
						<span><div id='wjqdk' class="ui-alert">请选择</div></span>
					</div>
					</a>
				</li>
				<li style="height: 10px; background: #fafafa;"></li>
					<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
						<a class="mui-navigate-right" id='showUserPicker' type='button'>
							<label>未结清贷款放款时间</label>
							<span>
								<button id='demo2' data-options='{"type":"date","beginYear":2014,"endYear":2016}' class="btn mui-btn mui-btn-block" style="opacity: 0; position: absolute;">请选择</button>
								<div id='result' class="ui-alert">请选择</div></span>	
							<img class="mui-jiantou" src="../images/tb.png"/>
						</a>
				</li>
				<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
						<a class="mui-navigate-right" id='showDanbaoPicker' type='button'>
							<label>未结清贷款担保方式</label>
							<span><div id='dkdbfs' class="ui-alert">请选择</div><img src="../images/tb.png"/></span>							
						</a>
				</li>
				<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
				<div class="mui-input-row">
						<label>未结清贷款的批款额度</label>
						<input id="dkpked" name="dkpked" type="text" placeholder="请输入">
						<span>万</span>
						<span style="position: absolute;right: 24px;color: #666;"><img src="../images/tb.png"/></span>
					</div>
				</li>
					<li class="mui-table-view-cell mui-collapse" style="list-style: none;">
						<a class="mui-navigate-right" id='showBankPicker' type='button'>
							<label>未结清贷款的批款银行</label>
							<span><div id='dkbank' class="ui-alert">请选择</div><img src="../images/tb.png"/></span>
							
						</a>
				</li>
					
				
						
					</div>
					

			
			
				<div style="margin-bottom: 63px; background: rgb(255, 255, 255) none repeat scroll 0% 0%; padding: 45px 20px 0px;">
				<p style="font-size: 12px;"><img src="../images/dl.png" style="width: 15px; margin-top: 3px; float: left;"/>&nbsp;&nbsp;我同意<a style="color: #ff9669;">《企业钱包服务条款》</a></p></div>
			
				<button type="button" class="mui-btn mui-btn-primary" id="do_submit" style="position: fixed;bottom: 0%;background-color: #ff9900;width: 100%; padding:12px 0; border:none;border-radius:0px;font-size:16px ;">
					立即提交
				</button>
				<!--<a href="sqjgcg.html" class="mui-btn mui-btn-primary" style="position: fixed;bottom: 0%;background-color: #ff9900;width: 100%;border: 1px solid #ff9900;border-radius:0px;font-size:16px ;">
					立即提交
				</a>-->
						
					
				</form>
			</div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/mui.picker.min.js"></script>
		<script src="../js/mui.picker.js"></script>
		<script src="../js/mui.poppicker.js"></script>
		<script src="../js/city.data.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/city.data-3.js" type="text/javascript" charset="utf-8"></script>
	
		<script>
			mui.init({
				swipeBack: true //启用右滑关闭功能
			});
			 //语音识别完成事件
			document.getElementById("search").addEventListener('recognized', function(e) {
				console.log(e.detail.value);
			});

			var nativeWebview, imm, InputMethodManager;
			var initNativeObjects = function() {
				if (mui.os.android) {
					var main = plus.android.runtimeMainActivity();
					var Context = plus.android.importClass("android.content.Context");
					InputMethodManager = plus.android.importClass("android.view.inputmethod.InputMethodManager");
					imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);
				} else {
					nativeWebview = plus.webview.currentWebview().nativeInstanceObject();
				}
			};
			var showSoftInput = function() {
				if (mui.os.android) {
					imm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);
				} else {
					nativeWebview.plusCallMethod({
						"setKeyboardDisplayRequiresUserAction": false
					});
				}
				setTimeout(function() {
					var inputElem = document.querySelector('input');
					inputElem.focus();
					inputElem.parentNode.classList.add('mui-active'); //第一个是search，加上激活样式
				}, 200);
			};
			mui.plusReady(function() {
				initNativeObjects();
				showSoftInput();
			});

		</script>
		<script>
			(function($, doc) {
				$.init();
				$.ready(function() {
					
					var loginButton = doc.getElementById('do_submit');
					var real_estate_valuation = doc.getElementById('fcgz');//1
					var real_estate_type = doc.getElementById('real_estate_type');//1
					var real_estate_years = doc.getElementById('real_estate_years');//1
					var is_has_car = doc.getElementById('userResult');
					var car_valuation = doc.getElementById('qcgz');//1
					var is_has_loan = doc.getElementById('wjqdk');
					
					var loan_time = doc.getElementById('result');
					var guarantee_way = doc.getElementById('dkdbfs');
					var loan_quota = doc.getElementById('dkpked');
					var loan_bank = doc.getElementById('dkbank');
					
					loginButton.addEventListener('tap', function(event) {
						var loginInfo = {
							real_estate_valuation:real_estate_valuation.value,
							real_estate_type:real_estate_type.innerHTML,
							real_estate_years:real_estate_years.innerHTML,
							loan_quota:loan_quota.value,
							is_has_car:is_has_car.innerHTML,
							car_valuation:car_valuation.value,
							is_has_loan:is_has_loan.innerHTML,
							loan_time:loan_time.innerHTML,
							guarantee_way:guarantee_way.innerHTML,
							loan_bank:loan_bank.innerHTML,
						};
						do_submit2(loginInfo);

					});
					/**
					 * 获取对象属性的值
					 * 主要用于过滤三级联动中，可能出现的最低级的数据不存在的情况，实际开发中需要注意这一点；
					 * @param {Object} obj 对象
					 * @param {String} param 属性名
					 */
					var _getParam = function(obj, param) {
						return obj[param] || '';
					};
					//普通示例
					var userPicker = new $.PopPicker();
					userPicker.setData([{
						value: 'wfc',
						text: '无房产'
					}, {
						value: 'xcqf',
						text: '小产权房'
					},{
						value: 'jjxjf',
						text: '经适/限价房'
					},{
						value: 'ywj',
						text: '房改/危改房'
					},{
						value: 'ywj',
						text: '商铺'
					},{
						value: 'ywj',
						text: '厂房'
					},{
						value: 'ywj',
						text: '商住两用房'
					},
					
					]);
					var showUserPickerButton = doc.getElementById('showUserPicker');
					var real_estate_type = doc.getElementById('real_estate_type');
					showUserPickerButton.addEventListener('tap', function(event) {
						userPicker.show(function(items) {
							real_estate_type.innerText = items[0].text;
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
					//-----------------------------------------
					//普通示例
					var CityPicker = new $.PopPicker();
					CityPicker.setData([{
						value: 'qsyear',
						text: '70'
					}, {
						value: 'wsyear',
						text: '50'
					},{
						value: 'ssyear',
						text: '40'
					},
					
					]);
					var showCityPickerButton = doc.getElementById('showCityPicker');
					var real_estate_years = doc.getElementById('real_estate_years');
					showCityPickerButton.addEventListener('tap', function(event) {
						CityPicker.show(function(items) {
							real_estate_years.innerText = items[0].text;
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
					//-----------------------------------------
					//普通示例
					var ChePicker = new $.PopPicker();
					ChePicker.setData([{
						value: 'cheyou',
						text: '有'
					}, {
						value: 'chewu',
						text: '无'
					},
					
					]);
					var showChePickerButton = doc.getElementById('showChePicker');
					var userResult = doc.getElementById('userResult');
					showChePickerButton.addEventListener('tap', function(event) {
						ChePicker.show(function(items) {
							userResult.innerText = items[0].text;
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
					//-----------------------------------------
					//普通示例
					var DaikPicker = new $.PopPicker();
					DaikPicker.setData([{
						value: 'daikyou',
						text: '有'
					}, {
						value: 'daikwu',
						text: '无'
					},
					
					]);
					var showDaikPickerButton = doc.getElementById('showDaikPicker');
					var wjqdk = doc.getElementById('wjqdk');
					showDaikPickerButton.addEventListener('tap', function(event) {
						DaikPicker.show(function(items) {
							wjqdk.innerText = items[0].text;
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
					//-----------------------------------------
					//普通示例
					var DanbaoPicker = new $.PopPicker();
					DanbaoPicker.setData([{
						value: 'dbfsa',
						text: '方式一'
					}, {
						value: 'dbfsb',
						text: '方式二'
					},
					
					]);
					var showDanbaoPickerButton = doc.getElementById('showDanbaoPicker');
					var dkdbfs = doc.getElementById('dkdbfs');
					showDanbaoPickerButton.addEventListener('tap', function(event) {
						DanbaoPicker.show(function(items) {
							dkdbfs.innerText = items[0].text;
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
					//-----------------------------------------
					//普通示例
					var BankPicker = new $.PopPicker();
					BankPicker.setData([{
						value: 'pabank',
						text: '平安银行'
					}, {
						value: 'pfbank',
						text: '浦发银行'
					},{
						value: 'gsbank',
						text: '工商银行'
					},
					
					]);
					var showBankPickerButton = doc.getElementById('showBankPicker');
					var dkbank = doc.getElementById('dkbank');
					showBankPickerButton.addEventListener('tap', function(event) {
						BankPicker.show(function(items) {
							dkbank.innerText = items[0].text;
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
					//-----------------------------------------
					
				});
			})(mui, document);
			
			
			//test start
			
			function do_submit2(account){
//				alert(account.real_estate_type);
				var check = true;
				mui(".mui-input-group input").each(function () {
				  //若当前input为空，则alert提醒
				  if(!this.value){
				    var label = this.previousElementSibling;
				    mui.toast(label.innerText+"不允许为空");
				    check = false;
				    return false;
				  }
				});
				mui(".mui-input-group div").each(function () {
				  //若当前input为空，则alert提醒
				  if(!this.innerHTML){
				    var label = this.previousElementSibling;
				    mui.toast(label.innerText+"不允许为空");
				    check = false;
				    return false;
				  }
				});
				//校验通过，继续执行业务逻辑
				if(check){
				  mui.ajax({
                type: "post",
                url: "http://60.174.234.53:1022/Home/Index/iwantloan?jsoncallback=?",
                async: true,
                data: {
					real_estate_valuation:account.real_estate_valuation,
					real_estate_type:account.real_estate_type,
					real_estate_years:account.real_estate_years,
					loan_quota:account.loan_quota,
					is_has_car:account.is_has_car,
					car_valuation:account.car_valuation,
					is_has_loane:account.is_has_loane,
					loan_time:account.loan_time,
					guarantee_way:account.guarantee_way,
					loan_bank:account.loan_bank
					
                },
                dataType: "jsonp",
                jsonp: "jsoncallback",
                timeout: 1000,
                success: function(data) {
                    //服务器返回响应，根据响应结果，分析是否登录成功；
					if(data.status == 1){
						var data = JSON.parse(data);
						mui.toast(data.msg);
						mui.openWindow({
					    url: 'loan.html', 
					    id:'loan.html',
					    extras:{
					      
					    },
					  });
						
						
						
					}else{
						var data = JSON.parse(data);
						mui.toast(data.msg);
//						return callback(data.msg);
					}
	            },
                error: function(xhr, type, errorThrown) {
                    //异常处理；
                    switch ( xhr.readyState ) {
			        case 0:
			            alert( "xhr请求已初始化" );
			        break;
			        case 1:
			            alert( "xhr请求已打开" );
			        break;
			        case 2:
			            alert( "xhr请求已发送" );
			        break;
			        case 3:
			            alert( "xhr请求已响应");
			            break;
			        case 4:
			            if ( xhr.status == 200 ) {
			                alert( "xhr请求成功："+xhr.responseText );
			            } else {
			                alert( "xhr请求失败："+xhr.readyState );
			            }
			            break;
			        default :
			            break;
			    }
                }
            });
				}
			}
			
			//test end
		</script>
		<script>
			(function($) {
				$.init();
				var result = $('#result')[0];
				var btns = $('.btn');
				btns.each(function(i, btn) {
					btn.addEventListener('tap', function() {
						var _self = this;
						if(_self.picker) {
							_self.picker.show(function (rs) {
								result.innerText = '选择结果: ' + rs.text;
								_self.picker.dispose();
								_self.picker = null;
							});
						} else {
							var optionsJson = this.getAttribute('data-options') || '{}';
							var options = JSON.parse(optionsJson);
							var id = this.getAttribute('id');
							/*
							 * 首次显示时实例化组件
							 * 示例为了简洁，将 options 放在了按钮的 dom 上
							 * 也可以直接通过代码声明 optinos 用于实例化 DtPicker
							 */
							_self.picker = new $.DtPicker(options);
							_self.picker.show(function(rs) {
								/*
								 * rs.value 拼合后的 value
								 * rs.text 拼合后的 text
								 * rs.y 年，可以通过 rs.y.vaue 和 rs.y.text 获取值和文本
								 * rs.m 月，用法同年
								 * rs.d 日，用法同年
								 * rs.h 时，用法同年
								 * rs.i 分（minutes 的第二个字母），用法同年
								 */
								result.innerText = rs.text;
								/* 
								 * 返回 false 可以阻止选择框的关闭
								 * return false;
								 */
								/*
								 * 释放组件资源，释放后将将不能再操作组件
								 * 通常情况下，不需要示放组件，new DtPicker(options) 后，可以一直使用。
								 * 当前示例，因为内容较多，如不进行资原释放，在某些设备上会较慢。
								 * 所以每次用完便立即调用 dispose 进行释放，下次用时再创建新实例。
								 */
								_self.picker.dispose();
								_self.picker = null;
							});
						}
						
					}, false);
				});
			})(mui);
		</script>
	</body>

</html>